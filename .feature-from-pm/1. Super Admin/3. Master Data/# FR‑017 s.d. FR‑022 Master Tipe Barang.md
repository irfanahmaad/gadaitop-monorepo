# FR‑017 s.d. FR‑022 Master Tipe Barang

## FR‑017 View Master Tipe Barang List

**Feature Name:** View Master Tipe Barang List  

### Description  
The system provides a “Master Tipe Barang” page that lists all item type records used in Gadai Top (e.g., Handphone, Sepeda Motor, TV) in a table, aligned with the Figma design: header with title and “Tambah Data” button, table of tipe barang, and per‑row action menu.

### Actor  
- Super Admin (Owner)  
- Super Admin  

### Priority  
High  

### Preconditions
- User is logged into CMS with permission to access “Master Tipe Barang”.  
- User opens the “Master Tipe Barang” menu under “Master Data”.  
- Master Tipe Barang API is reachable.

### Postconditions
- The system displays the latest list of item types in a table matching Figma (columns & actions).  
- List state (page, search, selected rows) can be restored when user returns, if supported.  

### UI & Interaction Requirements

**Page Layout**
- Standard CMS layout:  
  - Left sidebar: menu item “Master Tipe Barang” active.  
  - Top bar: user profile on the right.  
- Content header:  
  - Title: “Master Tipe Barang”.  
  - Optional breadcrumb: “Page / Master Tipe Barang”.  
  - Primary button “+ Tambah Data” on top‑right to open Create form (FR‑019).

**Table Layout**
- Section title: “Daftar Tipe Barang”.  
- Table columns (from left to right, mengikuti Figma):  
  1. Checkbox (bulk selection).  
  2. Kode Tipe Barang.  
  3. Nama Tipe Barang.  
  4. Created At (tanggal & waktu pembuatan).  
  5. Action (three‑dot menu).  
- Each row represents one item type with all above values plus Action menu.  
- Clicking cells (including “Nama Tipe Barang”) **does not** open detail; detail/edit/delete via Action menu only.  
- Checkbox in header selects/deselects all rows in current page.

**States**
- Loading: skeleton rows/spinner in table body.  
- Empty: message “Belum ada Tipe Barang yang terdaftar” dan optional shortcut “Tambah Tipe Barang”.  
- Error: banner “Tidak dapat memuat data Tipe Barang. Coba lagi.” dan tombol “Coba Lagi”.

**Responsiveness**
- Desktop (≥1366 px): columns terlihat penuh tanpa overlap.  
- Tablet/smaller: teks panjang boleh di‑truncate dengan ellipsis, tabel bisa di‑scroll horizontal.

### Data & Behavior Requirements
- Initial API call with params: `page`, `pageSize`, `sortBy` (default by `createdAt` desc or code), `sortDirection`.  
- “Kode Tipe Barang” dan “Nama Tipe Barang” diambil dari master tipe barang di backend.  
- “Created At” menampilkan timestamp pembuatan, diformat sesuai standar (mis. “19 November 2025 23:03:33”).  
- Row checkbox + header checkbox digunakan untuk bulk delete (FR‑022).  
- Action menu item minimal: “Edit” dan “Delete”; “Detail” opsional jika ingin ada halaman terpisah.

### Security & Business Rules
- Hanya role yang berwenang yang dapat melihat dan mengelola Master Tipe Barang.  
- Master tipe barang ini dipakai oleh modul lain (SPK, Katalog, Stock Opname); backend dapat mencegah delete bila tipe sudah terhubung ke data aktif.  
- Tidak boleh ada hard delete di database; gunakan soft delete/status.

### Acceptance Criteria
- Authorized user membuka “Master Tipe Barang” dan melihat tabel dengan kolom Kode Tipe Barang, Nama Tipe Barang, Created At, dan Action.  
- Klik di sel manapun tidak mengubah halaman; hanya Action menu yang memicu navigasi/aksi.  
- Loading, empty, dan error state tampil rapi tanpa merusak layout.  

---

## FR‑018 Pagination & Result Summary (Master Tipe Barang)

**Feature Name:** Master Tipe Barang Pagination  

### Description  
The system provides pagination controls and result summary at the bottom of the “Daftar Tipe Barang” table to navigate through many item type records.

### Actor  
- Super Admin (Owner)  
- Super Admin  

### Priority  
Medium  

### Preconditions
- User is on Master Tipe Barang page.  
- Total count of tipe barang > pageSize.

### Postconditions
- User can navigate to any page of tipe barang.  
- “Showing X to Y of Z results” always represents the current slice & total.

### UI & Interaction Requirements
- Bottom‑right: pagination controls (Previous, page numbers, Next) dengan active page highlight.  
- Bottom‑left: text “Showing X to Y of Z results”.  
- Optional dropdown pageSize (10, 25, 50, 100) di area kontrol atas tabel seperti di Figma.

### Data & Behavior Requirements
- Page changes memicu API call dengan page baru, mempertahankan search/filter.  
- Mengubah pageSize reload data dan reset ke page 1.  
- Mengubah search (FR‑019) juga reset ke page 1 dan hitung ulang summary.

### Security & Business Rules
- Pagination tidak boleh bocorkan tipe barang milik tenant/pemilik lain jika ada pemisahan data.  

### Acceptance Criteria
- Saat jumlah tipe barang > pageSize, pagination dan summary muncul dan nilainya benar.  
- Klik Next/Previous/page number mengubah halaman tanpa reload penuh dan highlight page aktif ikut berubah.  

---

## FR‑019 Search & Filter Master Tipe Barang

**Feature Name:** Search Tipe Barang  

### Description  
The system allows users to search item types by kode or nama via a search bar on the Master Tipe Barang page.

### Actor  
- Super Admin (Owner)  
- Super Admin  

### Priority  
High  

### Preconditions
- User berada di halaman Master Tipe Barang.  
- Komponen search tampak di area toolbar tabel.

### Postconditions
- Tabel hanya menampilkan tipe barang yang sesuai kata kunci.  
- User dapat menghapus kata kunci untuk kembali ke list penuh.

### UI & Interaction Requirements
- Search input dengan placeholder “Cari Kode atau Nama Tipe Barang”.  
- User mengetik dan tekan Enter atau klik ikon search untuk jalankan pencarian.  
- Tombol/ikon clear untuk mengosongkan input dan reload daftar penuh.

### Data & Behavior Requirements
- Pencarian dilakukan di backend dengan parameter keyword yang dicocokkan minimal ke:  
  - kode_tipe_barang  
  - nama_tipe_barang  
- Saat search aktif:  
  - Pagination reset ke page 1.  
  - Summary menampilkan hasil filter.  
- Jika hasil 0, tampil pesan “Tipe Barang tidak ditemukan untuk kata kunci ini.”

### Security & Business Rules
- Search hanya mengembalikan data yang memang boleh dilihat user.  

### Acceptance Criteria
- Memasukkan kata kunci yang valid mem‑filter tabel sesuai kode/nama.  
- Jika tidak ada hasil, user melihat pesan tidak ada hasil tanpa layout broken.  
- Menghapus kata kunci mengembalikan tampilan daftar awal.

---

## FR‑020 Create Tipe Barang (Tambah Tipe Barang)

**Feature Name:** Create Tipe Barang  

### Description  
The system provides a “Tambah Tipe Barang” form (inline card) to create a new item type, as shown in Figma: simple form with Kode Tipe Barang dan Nama Tipe Barang, plus confirmation and success modals.

### Actor  
- Super Admin (Owner)  
- Super Admin  

### Priority  
High  

### Preconditions
- User has permission to create item types.  
- User berada di Master Tipe Barang dan klik tombol “+ Tambah Data”.

### Postconditions
- Rekaman Tipe Barang baru dibuat di database.  
- Data baru muncul di tabel Master Tipe Barang sesuai sort & pagination.

### UI & Interaction Requirements

**Form Layout**
- Section/card title: “Tambah Tipe Barang”.  
- Sub‑label: “Detail Tipe Barang”.  
- Fields:  
  - Kode Tipe Barang * (text).  
  - Nama Tipe Barang * (text).  
- Buttons di bawah:  
  - “Batal” (secondary).  
  - “Simpan” (primary red).

**Validation & Feedback**
- Kode dan Nama wajib diisi.  
- Kode harus unik dan mengikuti format yang disepakati (misalnya angka 4 digit).  
- Error per field ditampilkan tepat di bawah input saat submit gagal.  
- Klik “Batal” dengan perubahan memunculkan modal konfirmasi “Apakah Anda Yakin?”.  
- Submit sukses memunculkan modal “Sukses! Data Tipe Barang berhasil disimpan” lalu kembali ke list.

### Data & Behavior Requirements
- Payload create minimal: `kodeTipeBarang`, `namaTipeBarang`.  
- Backend menyimpan timestamp `createdAt`.  
- Setelah sukses, frontend:  
  - Menutup form/modal (sesuai implementasi) dan refresh tabel list.  

### Security & Business Rules
- Hanya role tertentu yang boleh create; jika tidak, tombol “Tambah Data” disembunyikan atau dikunci.  
- Tidak boleh ada hard delete; jika nanti tipe dihapus, gunakan soft delete (lihat FR‑022).  

### Acceptance Criteria
- Klik “+ Tambah Data” menampilkan form “Tambah Tipe Barang” sesuai Figma.  
- Submit dengan data valid membuat tipe barang baru dan memunculkan notifikasi sukses.  
- Submit dengan data tidak valid menampilkan pesan error dan tidak membuat data.  
- Batal dengan perubahan memunculkan modal konfirmasi sebelum keluar.

---

## FR‑021 Update Tipe Barang (Edit Tipe Barang)

**Feature Name:** Edit Tipe Barang  

### Description  
The system provides an “Edit Tipe Barang” form similar to the create form but prefilled, to update existing item types.

### Actor  
- Super Admin (Owner)  
- Super Admin  

### Priority  
High  

### Preconditions
- User berada di Master Tipe Barang dan memilih “Edit” dari menu Action baris tertentu.  
- ID Tipe Barang valid.

### Postconditions
- Data Tipe Barang diupdate di database.  
- Tabel menampilkan nilai kode/nama terbaru.

### UI & Interaction Requirements
- Card title: “Edit Tipe Barang”.  
- Sub‑label: “Detail Tipe Barang”.  
- Fields prefilled:  
  - Kode Tipe Barang *  
  - Nama Tipe Barang *  
- Buttons: “Batal” dan “Simpan”.  
- “Batal” dengan perubahan memunculkan modal “Apakah Anda Yakin?”.  
- Submit sukses memunculkan modal “Sukses! Data Tipe Barang berhasil diupdate”.

### Data & Behavior Requirements
- Saat membuka Edit, frontend memuat data tipe barang by ID.  
- Validasi sama seperti Create: required, format, uniqueness kode (kecuali dirinya sendiri).  
- Jika kode diubah dan melanggar constraint (dipakai di transaksi), backend boleh menolak dengan pesan khusus; UI menampilkan pesan itu di dekat field.

### Security & Business Rules
- Hanya user berhak yang bisa mengedit.  
- Perubahan penting (kode/nama) sebaiknya dicatat di audit log (sebelum/sesudah).  

### Acceptance Criteria
- Memilih “Edit” dari Action menu membuka form edit dengan field terisi.  
- Perubahan valid tersimpan, tabel refresh, dan modal sukses muncul.  
- Data tidak valid memunculkan error per field dan mencegah penyimpanan.  

---

## FR‑022 Delete Tipe Barang (Single & Bulk)

**Feature Name:** Delete Tipe Barang (Single & Bulk)  

### Description  
The system allows users to delete (soft‑delete) one or multiple item types from Master Tipe Barang, with confirmation and success modals as in Figma.

### Actor  
- Super Admin (Owner)  
- Super Admin  

### Priority  
High  

### Preconditions
- User berada di Master Tipe Barang.  
- Ada minimal satu Tipe Barang di tabel.  
- Aturan bisnis mengenai penghapusan tipe barang (misal: tidak boleh menghapus tipe yang masih dipakai di SPK aktif) didefinisikan di backend.

### Postconditions
- Tipe Barang yang memenuhi syarat berhasil di‑soft‑delete dan hilang dari list default.  
- Semua aksi hapus tercatat di audit log.

### UI & Interaction Requirements

**Single Delete**
- User membuka menu Action baris dan klik “Delete”.  
- Muncul modal:  
  - Judul: “Apakah Anda Yakin?”.  
  - Pesan: menjelaskan bahwa tipe barang akan dihapus dan mungkin berdampak pada penggunaan di sistem.  
  - Tombol: “Batal” dan “Hapus”.  
- Setelah konfirmasi dan API sukses, tampil modal/toast “Sukses! Data Tipe Barang berhasil dihapus” dan baris hilang.

**Bulk Delete**
- User memilih beberapa baris lewat checkbox.  
- Indikator di atas tabel menampilkan “X selected” dan tombol “Hapus”.  
- Klik “Hapus” membuka modal konfirmasi yang menyebut jumlah tipe barang.  
- Setelah konfirmasi, semua tipe yang bisa dihapus dihilangkan dari tabel; jika ada yang gagal, tampil ringkasan error.

### Data & Behavior Requirements
- Penghapusan dilakukan dengan flag status (soft delete), bukan remove permanen.  
- Setelah operasi hapus, tabel dan summary (Showing X–Y of Z results) di‑refresh agar angka sesuai.  
- Backend mengembalikan daftar ID yang gagal dihapus beserta alasan (misal: “Tipe masih digunakan di 10 SPK aktif”) untuk ditampilkan di UI bila perlu.

### Security & Business Rules
- Hanya role tertentu yang boleh melakukan delete.  
- Tipe Barang yang sudah di‑soft‑delete tidak boleh muncul di dropdown/lookup di modul lain, kecuali di layar khusus histori.  

### Acceptance Criteria
- Single delete dari Action menu menampilkan modal konfirmasi; konfirmasi berhasil menghapus baris dari tabel dan menunjukkan pesan sukses.  
- Bulk delete bekerja untuk banyak baris sekaligus, dengan penanganan partial failure.  
- Setelah delete, pagination & summary terupdate dan tidak ada hard delete di database.
